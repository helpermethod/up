_complete_basename() {
  local basename_to_complete=${COMP_WORDS[COMP_CWORD]}
  COMPREPLY=()

  if [[ $PWD != "/" ]]; then
    COMPREPLY+=("/")

    while read -d "/"; do
      if [[ $basename =~ $basename_to_complete ]]; then
        COMPREPLY+=("$basename")
      fi
    done <<< "${PWD:1}"
  fi
}

complete -F _complete_basename up