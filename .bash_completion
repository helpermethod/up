_complete_basename() {
  COMPREPLY=()

	[[ $PWD = "/" ]] && return 0

	local basename_to_complete=${COMP_WORDS[COMP_CWORD]}

	[[ ! $basename_to_complete ]] && COMPREPLY+=("/")

	while read -d "/"; do
		[[ $REPLY = $basename_to_complete* ]] && COMPREPLY+=("$REPLY")
	done <<< "${PWD:1}"
}

complete -F _complete_basename up
