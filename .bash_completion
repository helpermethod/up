_complete_basename() {
  local basename_to_complete=${COMP_WORDS[COMP_CWORD]}
  local basenames=$(_get_basenames)

  COMPREPLY=($(compgen -W "$basenames" -- "$basename_to_complete"))
}

_get_basenames() {
  local basenames="/"
  local IFS="/"

  for basename in ${PWD:1}; do
    basenames="$basenames $basename"
  done

  echo "$basenames"
}

complete -F _complete_basename up