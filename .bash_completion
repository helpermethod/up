_complete_basename() {
  local basename_to_complete=${COMP_WORDS[COMP_CWORD]}
  local basenames=$(_get_basenames)

  COMPREPLY=($(compgen -W "$basenames" -- "$basename_to_complete"))
}

_get_basenames() {
  if [[ $PWD = "/" ]]; then
    echo ""
    return
  fi

  local basenames=("/")

  while read -d "/"; do
    basenames+=("$REPLY")
  done <<< "${PWD:1}"

  echo "${basenames[@]}"
}

complete -F _complete_basename up