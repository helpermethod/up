_complete_basename() {
  local current_basename=${COMP_WORDS[COMP_CWORD])
  local basenames=$(_get_basenames)

  COMP_REPLY=($(compgen -W "$basenames" -- "$current"))
}

_get_basenames() {
  local basenames="/"
  local IFS="/"

  for basename in ${PWD:1}; do
    $basenames=" $basename"
  done

  echo "$basenames"
}

complete -F _complete_basename up